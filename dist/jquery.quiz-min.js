/*!
 * jquery-quiz v0.0.1 - A simple jQuery quiz plugin.
 * Copyright (c) 2017 JC Hamill - http://jchamill.github.com/jquery-quiz/
 * License: MIT
 */


!function(a,b,c,d){"use strict";a.quiz=function(b,d){var e=this;e.$el=a(b),e.$el.data("quiz",e),e.options=a.extend(a.quiz.defaultOptions,d);var f=e.options.questions,g=f.length,h=(e.options.startScreen,e.options.startButton),i=e.options.homeButton,j=e.options.resultsScreen,k=e.options.resultsScreenGood,l=e.options.resultsScreenBad,m=1,n=0,o=!1;e.methods={init:function(){e.methods.setup(),a(c).on("click",h,function(a){a.preventDefault(),e.methods.start()}),a(c).on("click",i,function(a){a.preventDefault(),e.methods.home()}),a(c).on("click",".answers a",function(a){a.preventDefault(),e.methods.answerQuestion(this)}),a(c).on("click","#quiz-next-btn",function(a){a.preventDefault(),e.methods.nextQuestion()}),a(c).on("click","#quiz-finish-btn",function(a){a.preventDefault(),e.methods.finish()}),a(c).on("click","#quiz-restart-btn, #quiz-retry-btn",function(a){a.preventDefault(),e.methods.restart()})},setup:function(){var b="";b+='<div id="questions">',a.each(f,function(c,d){b+='<div class="question-container">',b+='<h2 id="quiz-counter">Question '+(c+1)+".</h2>",b+='<p class="question">'+d.q+"</p>",b+='<ul class="answers">',a.each(d.options,function(a,c){b+='<li><a href="#" data-index="'+a+'">'+c+"</a></li>"}),b+="</ul>",b+='<p class="quiz-response"></p>',b+='<div class="overlay"></div></div>'}),b+="</div>",b+='<div class="quiz-controls">',b+='<div id="quiz-buttons">',b+='<a href="#" id="quiz-next-btn">Next</a>',b+='<a href="#" id="quiz-finish-btn">Finish</a>',b+="</div>",b+="</div>",e.$el.append(b).addClass("quiz-container quiz-start-state"),a(".question-container").hide(),a(j).hide(),a(".quiz-controls").hide()},start:function(){e.$el.removeClass("quiz-start-state").addClass("quiz-questions-state"),a("#quiz-controls").hide(),a("#quiz-finish-btn").hide(),a("#quiz-restart-btn").hide(),a("#questions").show(),a(".question-container:first-child").show().addClass("active-question"),e.methods.updateCounter()},answerQuestion:function(b){if(!o){o=!0;var d=a(b),g="",h=d.data("index"),i=m-1,j=f[i].correctIndex;if(d.addClass("selected"),h===j)d.addClass("correct"),a(".active-question .quiz-response").addClass("correct"),g=f[i].correctResponse,n++;else if(d.addClass("incorrect"),a(".active-question .quiz-response").addClass("incorrect"),g=f[i].incorrectResponse,!e.options.allowIncorrect)return void e.methods.gameOver(g);a("html, body").animate({scrollTop:a(c).height()},1200),a(".active-question .quiz-response").html(g),a(".quiz-controls").fadeIn(),"function"==typeof e.options.answerCallback&&e.options.answerCallback(m,h===j)}},nextQuestion:function(){o=!1,a(".active-question .overlay").fadeIn(800),a(".active-question").removeClass("active-question").addClass("bottomBorder").next(".question-container").show().addClass("active-question"),a("html, body").animate({scrollTop:a(c).height()},1200),a(".quiz-controls").hide(),++m===g&&(a("#quiz-next-btn").hide(),a("#quiz-finish-btn").show()),e.methods.updateCounter(),"function"==typeof e.options.nextCallback&&e.options.nextCallback()},finish:function(){e.$el.removeClass("quiz-questions-state").addClass("quiz-results-state"),a(".active-question .overlay").fadeIn(800),a(".active-question").removeClass("active-question"),a(".quiz-controls").hide(),a("#quiz-response").hide(),a("#quiz-finish-btn").hide(),a("#quiz-next-btn").hide(),a(j).show(),n<3?a(l).show():a(k).show(),"function"==typeof e.options.finishCallback&&e.options.finishCallback()},restart:function(){e.methods.reset(),e.$el.addClass("quiz-questions-state"),a("#questions").show(),a(".question-container:first-child").show().addClass("active-question"),e.methods.updateCounter()},reset:function(){o=!1,m=1,n=0,a(".answers a").removeClass("correct incorrect"),e.$el.removeClass().addClass("quiz-container"),a("#quiz-restart-btn").hide(),a(j).hide(),a("#quiz-controls").hide(),a("#quiz-response").show(),a("#quiz-next-btn").show(),a(".active-question").hide().removeClass("active-question")},home:function(){e.methods.reset(),e.$el.addClass("quiz-start-state"),"function"==typeof e.options.homeCallback&&e.options.homeCallback()},updateCounter:function(){e.options.counterFormat.replace("%current",m).replace("%total",g)}},e.methods.init()},a.quiz.defaultOptions={allowIncorrect:!0,counter:!0,counterFormat:"%current/%total",startScreen:"#quiz-start-screen",startButton:"#quiz-start-btn",homeButton:"#quiz-home-btn",resultsScreen:"#quiz-results-screen"},a.fn.quiz=function(b){return this.each(function(){new a.quiz(this,b)})}}(jQuery,window,document);